var dy=function(j){const y=j instanceof Element?j:j instanceof Node?j.parentElement:null,z=y?y.closest("input, button"):null;return z?.type=="submit"?z:null},by=function(j){const y=dy(j.target);if(y&&y.form)Ej.set(y.form,y)},Ry=function(j){switch(j.toLowerCase()){case"lazy":return p.lazy;default:return p.eager}},H=function(j){return new URL(j.toString(),document.baseURI)},d=function(j){let y;if(j.hash)return j.hash.slice(1);else if(y=j.href.match(/#(.*)$/))return y[1]},$j=function(j,y){const z=y?.getAttribute("formaction")||j.getAttribute("action")||j.action;return H(z)},hy=function(j){return(cy(j).match(/\.[^.]*$/)||[])[0]||""},py=function(j){return!!hy(j).match(/^(?:|\.(?:htm|html|xhtml|php))$/)},uy=function(j,y){const z=iy(y);return j.href===H(z).href||j.href.startsWith(z)},L=function(j,y){return uy(j,y)&&py(j)},Zj=function(j){const y=d(j);return y!=null?j.href.slice(0,-(y.length+1)):j.href},zj=function(j){return Zj(j)},fy=function(j,y){return H(j).href==H(y).href},ay=function(j){return j.pathname.split("/").slice(1)},cy=function(j){return ay(j).slice(-1)[0]},iy=function(j){return ly(j.origin+j.pathname)},ly=function(j){return j.endsWith("/")?j:j+"/"},m=function(j){if(j.getAttribute("data-turbo-eval")=="false")return j;else{const y=document.createElement("script"),z=i("csp-nonce");if(z)y.nonce=z;return y.textContent=j.textContent,y.async=!1,oy(y,j),y}},oy=function(j,y){for(let{name:z,value:A}of y.attributes)j.setAttribute(z,A)},ry=function(j){const y=document.createElement("template");return y.innerHTML=j,y.content},$=function(j,{target:y,cancelable:z,detail:A}={}){const J=new CustomEvent(j,{cancelable:z,bubbles:!0,composed:!0,detail:A});if(y&&y.isConnected)y.dispatchEvent(J);else document.documentElement.dispatchEvent(J);return J},f=function(){if(document.visibilityState==="hidden")return bj();else return dj()},dj=function(){return new Promise((j)=>requestAnimationFrame(()=>j()))},bj=function(){return new Promise((j)=>setTimeout(()=>j(),0))},sy=function(){return Promise.resolve()},Rj=function(j=""){return new DOMParser().parseFromString(j,"text/html")},hj=function(j,...y){const z=my(j,y).replace(/^\n/,"").split("\n"),A=z[0].match(/^\s+/),J=A?A[0].length:0;return z.map((W)=>W.slice(J)).join("\n")},my=function(j,y){return j.reduce((z,A,J)=>{const W=y[J]==null?"":y[J];return z+A+W},"")},P=function(){return Array.from({length:36}).map((j,y)=>{if(y==8||y==13||y==18||y==23)return"-";else if(y==14)return"4";else if(y==19)return(Math.floor(Math.random()*4)+8).toString(16);else return Math.floor(Math.random()*15).toString(16)}).join("")},Bj=function(j,...y){for(let z of y.map((A)=>A?.getAttribute(j)))if(typeof z=="string")return z;return null},ny=function(j,...y){return y.some((z)=>z&&z.hasAttribute(j))},Dj=function(...j){for(let y of j){if(y.localName=="turbo-frame")y.setAttribute("busy","");y.setAttribute("aria-busy","true")}},Gj=function(...j){for(let y of j){if(y.localName=="turbo-frame")y.removeAttribute("busy");y.removeAttribute("aria-busy")}},ty=function(j,y=2000){return new Promise((z)=>{const A=()=>{j.removeEventListener("error",A),j.removeEventListener("load",A),z()};j.addEventListener("load",A,{once:!0}),j.addEventListener("error",A,{once:!0}),setTimeout(z,y)})},pj=function(j){switch(j){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}},ey=function(j){return j=="advance"||j=="replace"||j=="restore"},b=function(...j){const y=Bj("data-turbo-action",...j);return ey(y)?y:null},uj=function(j){return document.querySelector(`meta[name="${j}"]`)},i=function(j){const y=uj(j);return y&&y.content},jz=function(j,y){let z=uj(j);if(!z)z=document.createElement("meta"),z.setAttribute("name",j),document.head.appendChild(z);return z.setAttribute("content",y),z},a=function(j,y){if(j instanceof Element)return j.closest(y)||a(j.assignedSlot||j.getRootNode()?.host,y)},xj=function(j){return!!j&&j.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof j.focus=="function"},fj=function(j){return Array.from(j.querySelectorAll("[autofocus]")).find(xj)};async function yz(j,y){const z=y();j(),await dj();const A=y();return[z,A]}var zz=function(j){if(j.hasAttribute("target")){for(let y of document.getElementsByName(j.target))if(y instanceof HTMLIFrameElement)return!1}return!0},Az=function(j){return a(j,"a[href]:not([target^=_]):not([download])")},aj=function(j){return H(j.getAttribute("href")||"")},Bz=function(j,y){let z=null;return(...A)=>{const J=()=>j.apply(this,A);clearTimeout(z),z=setTimeout(J,y)}},lj=function(j,y={}){const z=new Headers(y.headers||{}),A=P();return ij.add(A),z.append("X-Turbo-Request-Id",A),Dz(j,{...y,headers:z})},Ij=function(j){switch(j.toLowerCase()){case"get":return T.get;case"post":return T.post;case"put":return T.put;case"patch":return T.patch;case"delete":return T.delete}},Gz=function(j){switch(j.toLowerCase()){case E.multipart:return E.multipart;case E.plain:return E.plain;default:return E.urlEncoded}},Hj=function(j){return Ij(j)==T.get},Pj=function(j,y,z,A){const J=Array.from(z).length>0?new URLSearchParams(oj(z)):j.searchParams;if(Hj(y))return[Jz(j,J),null];else if(A==E.urlEncoded)return[j,J];else return[j,z]},oj=function(j){const y=[];for(let[z,A]of j)if(A instanceof File)continue;else y.push([z,A]);return y},Jz=function(j,y){const z=new URLSearchParams(oj(y));return j.search=z.toString(),j},Kz=function(j){for(let y of j.querySelectorAll("turbo-stream")){const z=document.importNode(y,!0);for(let A of z.templateElement.content.querySelectorAll("script"))A.replaceWith(m(A));y.replaceWith(z)}return j},Wz=function(j,y){const z=new FormData(j),A=y?.getAttribute("name"),J=y?.getAttribute("value");if(A)z.append(A,J||"");return z},Xz=function(j){if(j!=null){const z=(document.cookie?document.cookie.split("; "):[]).find((A)=>A.startsWith(j));if(z){const A=z.split("=").slice(1).join("=");return A?decodeURIComponent(A):void 0}}},Yz=function(j){return j.statusCode==200&&!j.redirected},Zz=function(j,y){const z=typeof j.action==="string"?j.action:null;if(y?.hasAttribute("formaction"))return y.getAttribute("formaction")||"";else return j.getAttribute("action")||z||""},_z=function(j,y){const z=H(j);if(Hj(y))z.search="";return z},$z=function(j,y){const z=y?.getAttribute("formmethod")||j.getAttribute("method")||"";return Ij(z.toLowerCase())||T.get},xz=function(j,y){return Gz(y?.getAttribute("formenctype")||j.enctype)},mj=function(j,y){return j.querySelector(`#${y}[data-turbo-permanent]`)},nj=function(j){return j.querySelectorAll("[id][data-turbo-permanent]")},Iz=function(j,y){return(y?.getAttribute("formmethod")||j.getAttribute("method"))!="dialog"},Hz=function(j,y){if(y?.hasAttribute("formtarget")||j.hasAttribute("target")){const z=y?.getAttribute("formtarget")||j.target;for(let A of document.getElementsByName(z))if(A instanceof HTMLIFrameElement)return!1;return!0}else return!0},Mz=function(j){const y=document.createElement("meta");return y.setAttribute("name","turbo-permanent-placeholder"),y.setAttribute("content",j.id),y},Tz=function(j,y){if(j=="end"||j=="start"||j=="center"||j=="nearest")return j;else return y},Cz=function(j,y){if(j=="auto"||j=="smooth")return j;else return y},Fz=function(j){if(Uz(j))return"script";else if(Vz(j))return"stylesheet"},Nz=function(j){return j.getAttribute("data-turbo-track")=="reload"},Uz=function(j){return j.localName=="script"},qz=function(j){return j.localName=="noscript"},Vz=function(j){const y=j.localName;return y=="style"||y=="link"&&j.getAttribute("rel")=="stylesheet"},kz=function(j,y){return j.localName=="meta"&&j.getAttribute("name")==y},Lz=function(j){if(j.hasAttribute("nonce"))j.setAttribute("nonce","");return j},gj=function(j){return j>=200&&j<300},Rz=function(j){const y=nj(document.documentElement),z={};for(let A of y){const{id:J}=A;for(let W of j.querySelectorAll("turbo-stream")){const Y=mj(W.templateElement.content,J);if(Y)z[J]=[A,Y]}}return z};async function hz(j,y){const z=`turbo-stream-autofocus-${P()}`,A=j.querySelectorAll("turbo-stream"),J=uz(A);let W=null;if(J){if(J.id)W=J.id;else W=z;J.id=W}if(y(),await f(),(document.activeElement==null||document.activeElement==document.body)&&W){const Z=document.getElementById(W);if(xj(Z))Z.focus();if(Z&&Z.id==z)Z.removeAttribute("id")}}async function pz(j){const[y,z]=await yz(j,()=>document.activeElement),A=y&&y.id;if(A){const J=document.getElementById(A);if(xj(J)&&J!=z)J.focus()}}var uz=function(j){for(let y of j){const z=fj(y.templateElement.content);if(z)return z}return null},fz=function(j){const y=j.detail?.fetchResponse;if(y instanceof Kj)return y},az=function(j){return(j.contentType??"").startsWith(R.contentType)},wj=function(j){Object.defineProperties(j,iz)},Iy=function(){_.start()},rz=function(j){_.registerAdapter(j)},sz=function(j,y){_.visit(j,y)},Hy=function(j){_.connectStreamSource(j)},My=function(j){_.disconnectStreamSource(j)},mz=function(j){_.renderStreamMessage(j)},nz=function(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),_.clearCache()},tz=function(j){_.setProgressBarDelay(j)},ez=function(j){t.confirmMethod=j},jA=function(j){_.setFormMode(j)},vj=function(j){if(j!=null){const y=document.getElementById(j);if(y instanceof N)return y}},Sj=function(j,y){if(j){const z=j.getAttribute("src");if(z!=null&&y!=null&&fy(z,y))throw new Error(`Matching <turbo-frame id="${j.id}"> element has a source URL which references itself`);if(j.ownerDocument!==document)j=document.importNode(j,!0);if(j instanceof N)return j.connectedCallback(),j.disconnectedCallback(),j}};/*!
Turbo 8.0.4
Copyright Â© 2024 37signals LLC
 */(function(j){if(typeof j.requestSubmit=="function")return;j.requestSubmit=function(A){if(A)y(A,this),A.click();else A=document.createElement("input"),A.type="submit",A.hidden=!0,this.appendChild(A),A.click(),this.removeChild(A)};function y(A,J){A instanceof HTMLElement||z(TypeError,"parameter 1 is not of type 'HTMLElement'"),A.type=="submit"||z(TypeError,"The specified element is not a submit button"),A.form==J||z(DOMException,"The specified element is not owned by this form element","NotFoundError")}function z(A,J,W){throw new A("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+J+".",W)}})(HTMLFormElement.prototype);var Ej=new WeakMap;(function(){if("submitter"in Event.prototype)return;let j=window.Event.prototype;if("SubmitEvent"in window){const y=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in y))j=y;else return}addEventListener("click",by,!0),Object.defineProperty(j,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Ej.get(this.target)}})})();var p={eager:"eager",lazy:"lazy"};class N extends HTMLElement{static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super();this.delegate=new N.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(j){if(j=="loading")this.delegate.loadingStyleChanged();else if(j=="src")this.delegate.sourceURLChanged();else if(j=="disabled")this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(j){if(j)this.setAttribute("src",j);else this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(j){if(j)this.setAttribute("refresh",j);else this.removeAttribute("refresh")}get loading(){return Ry(this.getAttribute("loading")||"")}set loading(j){if(j)this.setAttribute("loading",j);else this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(j){if(j)this.setAttribute("disabled","");else this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(j){if(j)this.setAttribute("autoscroll","");else this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}}class Kj{constructor(j){this.response=j}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return H(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){if(this.isHTML)return this.response.clone().text();else return Promise.resolve(void 0)}header(j){return this.response.headers.get(j)}}class cj extends Set{constructor(j){super();this.maxSize=j}add(j){if(this.size>=this.maxSize){const z=this.values().next().value;this.delete(z)}super.add(j)}}var ij=new cj(20),Dz=window.fetch,T={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"},E={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"};class l{abortController=new AbortController;#j=(j)=>{};constructor(j,y,z,A=new URLSearchParams,J=null,W=E.urlEncoded){const[Y,Z]=Pj(H(z),y,A,W);this.delegate=j,this.url=Y,this.target=J,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:y,headers:{...this.defaultHeaders},body:Z,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=W}get method(){return this.fetchOptions.method}set method(j){const y=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,z=Ij(j)||T.get;this.url.search="";const[A,J]=Pj(this.url,z,y,this.enctype);this.url=A,this.fetchOptions.body=J,this.fetchOptions.method=z}get headers(){return this.fetchOptions.headers}set headers(j){this.fetchOptions.headers=j}get body(){if(this.isSafe)return this.url.searchParams;else return this.fetchOptions.body}set body(j){this.fetchOptions.body=j}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:j}=this;this.delegate.prepareRequest(this);const y=await this.#y(j);try{if(this.delegate.requestStarted(this),y.detail.fetchRequest)this.response=y.detail.fetchRequest.response;else this.response=lj(this.url.href,j);const z=await this.response;return await this.receive(z)}catch(z){if(z.name!=="AbortError"){if(this.#z(z))this.delegate.requestErrored(this,z);throw z}}finally{this.delegate.requestFinished(this)}}async receive(j){const y=new Kj(j);if($("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:y},target:this.target}).defaultPrevented)this.delegate.requestPreventedHandlingResponse(this,y);else if(y.succeeded)this.delegate.requestSucceededWithResponse(this,y);else this.delegate.requestFailedWithResponse(this,y);return y}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return Hj(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(j){this.headers.Accept=[j,this.headers.Accept].join(", ")}async#y(j){const y=new Promise((A)=>this.#j=A),z=$("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:j,url:this.url,resume:this.#j},target:this.target});if(this.url=z.detail.url,z.defaultPrevented)await y;return z}#z(j){return!$("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:j}}).defaultPrevented}}class rj{started=!1;constructor(j,y){this.delegate=j,this.element=y,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){if(!this.started)this.started=!0,this.intersectionObserver.observe(this.element)}stop(){if(this.started)this.started=!1,this.intersectionObserver.unobserve(this.element)}intersect=(j)=>{if(j.slice(-1)[0]?.isIntersecting)this.delegate.elementAppearedInViewport(this.element)}}class R{static contentType="text/vnd.turbo-stream.html";static wrap(j){if(typeof j=="string")return new this(ry(j));else return j}constructor(j){this.fragment=Kz(j)}}var Oz=100;class sj{#j=null;#y=null;get(j){if(this.#y&&this.#y.url===j&&this.#y.expire>Date.now())return this.#y.request}setLater(j,y,z){this.clear(),this.#j=setTimeout(()=>{y.perform(),this.set(j,y,z),this.#j=null},Oz)}set(j,y,z){this.#y={url:j,request:y,expire:new Date((new Date()).getTime()+z)}}clear(){if(this.#j)clearTimeout(this.#j);this.#y=null}}var Qz=1e4,u=new sj,h={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"};class t{state=h.initialized;static confirmMethod(j,y,z){return Promise.resolve(confirm(j))}constructor(j,y,z,A=!1){const J=$z(y,z),W=_z(Zz(y,z),J),Y=Wz(y,z),Z=xz(y,z);this.delegate=j,this.formElement=y,this.submitter=z,this.fetchRequest=new l(this,J,W,Y,y,Z),this.mustRedirect=A}get method(){return this.fetchRequest.method}set method(j){this.fetchRequest.method=j}get action(){return this.fetchRequest.url.toString()}set action(j){this.fetchRequest.url=H(j)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){const{initialized:j,requesting:y}=h,z=Bj("data-turbo-confirm",this.submitter,this.formElement);if(typeof z==="string"){if(!await t.confirmMethod(z,this.formElement,this.submitter))return}if(this.state==j)return this.state=y,this.fetchRequest.perform()}stop(){const{stopping:j,stopped:y}=h;if(this.state!=j&&this.state!=y)return this.state=j,this.fetchRequest.cancel(),!0}prepareRequest(j){if(!j.isSafe){const y=Xz(i("csrf-param"))||i("csrf-token");if(y)j.headers["X-CSRF-Token"]=y}if(this.requestAcceptsTurboStreamResponse(j))j.acceptResponseType(R.contentType)}requestStarted(j){this.state=h.waiting,this.submitter?.setAttribute("disabled",""),this.setSubmitsWith(),Dj(this.formElement),$("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(j,y){u.clear(),this.result={success:y.succeeded,fetchResponse:y}}requestSucceededWithResponse(j,y){if(y.clientError||y.serverError){this.delegate.formSubmissionFailedWithResponse(this,y);return}if(u.clear(),this.requestMustRedirect(j)&&Yz(y)){const z=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,z)}else this.state=h.receiving,this.result={success:!0,fetchResponse:y},this.delegate.formSubmissionSucceededWithResponse(this,y)}requestFailedWithResponse(j,y){this.result={success:!1,fetchResponse:y},this.delegate.formSubmissionFailedWithResponse(this,y)}requestErrored(j,y){this.result={success:!1,error:y},this.delegate.formSubmissionErrored(this,y)}requestFinished(j){this.state=h.stopped,this.submitter?.removeAttribute("disabled"),this.resetSubmitterText(),Gj(this.formElement),$("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!this.submitter||!this.submitsWith)return;if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const j=this.submitter;this.originalSubmitText=j.value,j.value=this.submitsWith}}resetSubmitterText(){if(!this.submitter||!this.originalSubmitText)return;if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const j=this.submitter;j.value=this.originalSubmitText}}requestMustRedirect(j){return!j.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(j){return!j.isSafe||ny("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}}class e{constructor(j){this.element=j}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(j){return this.getElementForAnchor(j)!=null}getElementForAnchor(j){return j?this.element.querySelector(`[id='${j}'], a[name='${j}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return fj(this.element)}get permanentElements(){return nj(this.element)}getPermanentElementById(j){return mj(this.element,j)}getPermanentElementMapForSnapshot(j){const y={};for(let z of this.permanentElements){const{id:A}=z,J=j.getPermanentElementById(A);if(J)y[A]=[z,J]}return y}}class Oj{started=!1;constructor(j,y){this.delegate=j,this.eventTarget=y}start(){if(!this.started)this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0}stop(){if(this.started)this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=(j)=>{if(!j.defaultPrevented){const y=j.target instanceof HTMLFormElement?j.target:void 0,z=j.submitter||void 0;if(y&&Iz(y,z)&&Hz(y,z)&&this.delegate.willSubmitForm(y,z))j.preventDefault(),j.stopImmediatePropagation(),this.delegate.formSubmitted(y,z)}}}class Mj{#j=(j)=>{};#y=(j)=>{};constructor(j,y){this.delegate=j,this.element=y}scrollToAnchor(j){const y=this.snapshot.getElementForAnchor(j);if(y)this.scrollToElement(y),this.focusElement(y);else this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(j){this.scrollToAnchor(d(j))}scrollToElement(j){j.scrollIntoView()}focusElement(j){if(j instanceof HTMLElement)if(j.hasAttribute("tabindex"))j.focus();else j.setAttribute("tabindex","-1"),j.focus(),j.removeAttribute("tabindex")}scrollToPosition({x:j,y}){this.scrollRoot.scrollTo(j,y)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(j){const{isPreview:y,shouldRender:z,willRender:A,newSnapshot:J}=j,W=A;if(z)try{this.renderPromise=new Promise((M)=>this.#j=M),this.renderer=j,await this.prepareToRenderSnapshot(j);const Y=new Promise((M)=>this.#y=M),Z={resume:this.#y,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};if(!this.delegate.allowsImmediateRender(J,Z))await Y;await this.renderSnapshot(j),this.delegate.viewRenderedSnapshot(J,y,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(j)}finally{delete this.renderer,this.#j(void 0),delete this.renderPromise}else if(W)this.invalidate(j.reloadReason)}invalidate(j){this.delegate.viewInvalidated(j)}async prepareToRenderSnapshot(j){this.markAsPreview(j.isPreview),await j.prepareToRender()}markAsPreview(j){if(j)this.element.setAttribute("data-turbo-preview","");else this.element.removeAttribute("data-turbo-preview")}markVisitDirection(j){this.element.setAttribute("data-turbo-visit-direction",j)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(j){await j.render()}finishRenderingSnapshot(j){j.finishRendering()}}class tj extends Mj{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new e(this.element)}}class Tj{constructor(j,y){this.delegate=j,this.element=y}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=(j)=>{if(this.respondsToEventTarget(j.target))this.clickEvent=j;else delete this.clickEvent};linkClicked=(j)=>{if(this.clickEvent&&this.respondsToEventTarget(j.target)&&j.target instanceof Element){if(this.delegate.shouldInterceptLinkClick(j.target,j.detail.url,j.detail.originalEvent))this.clickEvent.preventDefault(),j.preventDefault(),this.delegate.linkClickIntercepted(j.target,j.detail.url,j.detail.originalEvent)}delete this.clickEvent};willVisit=(j)=>{delete this.clickEvent};respondsToEventTarget(j){const y=j instanceof Element?j:j instanceof Node?j.parentElement:null;return y&&y.closest("turbo-frame, html")==this.element}}class Cj{started=!1;constructor(j,y){this.delegate=j,this.eventTarget=y}start(){if(!this.started)this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0}stop(){if(this.started)this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=(j)=>{if(j instanceof MouseEvent&&this.clickEventIsSignificant(j)){const y=j.composedPath&&j.composedPath()[0]||j.target,z=Az(y);if(z&&zz(z)){const A=aj(z);if(this.delegate.willFollowLinkToLocation(z,A,j))j.preventDefault(),this.delegate.followedLinkToLocation(z,A)}}};clickEventIsSignificant(j){return!(j.target&&j.target.isContentEditable||j.defaultPrevented||j.which>1||j.altKey||j.ctrlKey||j.metaKey||j.shiftKey)}}class Fj{constructor(j,y){this.delegate=j,this.linkInterceptor=new Cj(this,y)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(j,y){return!1}prefetchAndCacheRequestToLocation(j,y){return}willFollowLinkToLocation(j,y,z){return this.delegate.willSubmitFormLinkToLocation(j,y,z)&&(j.hasAttribute("data-turbo-method")||j.hasAttribute("data-turbo-stream"))}followedLinkToLocation(j,y){const z=document.createElement("form");for(let[o,g]of y.searchParams)z.append(Object.assign(document.createElement("input"),{type:"hidden",name:o,value:g}));const J=Object.assign(y,{search:""});z.setAttribute("data-turbo","true"),z.setAttribute("action",J.href),z.setAttribute("hidden","");const W=j.getAttribute("data-turbo-method");if(W)z.setAttribute("method",W);const Y=j.getAttribute("data-turbo-frame");if(Y)z.setAttribute("data-turbo-frame",Y);const Z=b(j);if(Z)z.setAttribute("data-turbo-action",Z);const V=j.getAttribute("data-turbo-confirm");if(V)z.setAttribute("data-turbo-confirm",V);if(j.hasAttribute("data-turbo-stream"))z.setAttribute("data-turbo-stream","");this.delegate.submittedFormLinkToLocation(j,y,z),document.body.appendChild(z),z.addEventListener("turbo:submit-end",()=>z.remove(),{once:!0}),requestAnimationFrame(()=>z.requestSubmit())}}class Nj{static async preservingPermanentElements(j,y,z){const A=new this(j,y);A.enter(),await z(),A.leave()}constructor(j,y){this.delegate=j,this.permanentElementMap=y}enter(){for(let j in this.permanentElementMap){const[y,z]=this.permanentElementMap[j];this.delegate.enteringBardo(y,z),this.replaceNewPermanentElementWithPlaceholder(z)}}leave(){for(let j in this.permanentElementMap){const[y]=this.permanentElementMap[j];this.replaceCurrentPermanentElementWithClone(y),this.replacePlaceholderWithPermanentElement(y),this.delegate.leavingBardo(y)}}replaceNewPermanentElementWithPlaceholder(j){const y=Mz(j);j.replaceWith(y)}replaceCurrentPermanentElementWithClone(j){const y=j.cloneNode(!0);j.replaceWith(y)}replacePlaceholderWithPermanentElement(j){this.getPlaceholderById(j.id)?.replaceWith(j)}getPlaceholderById(j){return this.placeholders.find((y)=>y.content==j)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}class Qj{#j=null;constructor(j,y,z,A,J=!0){this.currentSnapshot=j,this.newSnapshot=y,this.isPreview=A,this.willRender=J,this.renderElement=z,this.promise=new Promise((W,Y)=>this.resolvingFunctions={resolve:W,reject:Y})}get shouldRender(){return!0}get reloadReason(){return}prepareToRender(){return}render(){}finishRendering(){if(this.resolvingFunctions)this.resolvingFunctions.resolve(),delete this.resolvingFunctions}async preservingPermanentElements(j){await Nj.preservingPermanentElements(this,this.permanentElementMap,j)}focusFirstAutofocusableElement(){const j=this.connectedSnapshot.firstAutofocusableElement;if(j)j.focus()}enteringBardo(j){if(this.#j)return;if(j.contains(this.currentSnapshot.activeElement))this.#j=this.currentSnapshot.activeElement}leavingBardo(j){if(j.contains(this.#j)&&this.#j instanceof HTMLElement)this.#j.focus(),this.#j=null}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}}class Jj extends Qj{static renderElement(j,y){const z=document.createRange();z.selectNodeContents(j),z.deleteContents();const A=y,J=A.ownerDocument?.createRange();if(J)J.selectNodeContents(A),j.appendChild(J.extractContents())}constructor(j,y,z,A,J,W=!0){super(y,z,A,J,W);this.delegate=j}get shouldRender(){return!0}async render(){await f(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await f(),this.focusFirstAutofocusableElement(),await f(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const j=this.currentElement.firstElementChild,y=Tz(this.currentElement.getAttribute("data-autoscroll-block"),"end"),z=Cz(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(j)return j.scrollIntoView({block:y,behavior:z}),!0}return!1}activateScriptElements(){for(let j of this.newScriptElements){const y=m(j);j.replaceWith(y)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}class k{static animationDuration=300;static get defaultCSS(){return hj`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${k.animationDuration}ms ease-out,
          opacity ${k.animationDuration/2}ms ${k.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){if(!this.visible)this.visible=!0,this.installProgressElement(),this.startTrickling()}hide(){if(this.visible&&!this.hiding)this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1})}setValue(j){this.value=j,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(j){this.progressElement.style.opacity="0",setTimeout(j,k.animationDuration*1.5)}uninstallProgressElement(){if(this.progressElement.parentNode)document.documentElement.removeChild(this.progressElement)}startTrickling(){if(!this.trickleInterval)this.trickleInterval=window.setInterval(this.trickle,k.animationDuration)}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const j=document.createElement("style");if(j.type="text/css",j.textContent=k.defaultCSS,this.cspNonce)j.nonce=this.cspNonce;return j}createProgressElement(){const j=document.createElement("div");return j.className="turbo-progress-bar",j}get cspNonce(){return i("csp-nonce")}}class ej extends e{detailsByOuterHTML=this.children.filter((j)=>!qz(j)).map((j)=>Lz(j)).reduce((j,y)=>{const{outerHTML:z}=y,A=z in j?j[z]:{type:Fz(y),tracked:Nz(y),elements:[]};return{...j,[z]:{...A,elements:[...A.elements,y]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter((j)=>this.detailsByOuterHTML[j].tracked).join("")}getScriptElementsNotInSnapshot(j){return this.getElementsMatchingTypeNotInSnapshot("script",j)}getStylesheetElementsNotInSnapshot(j){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",j)}getElementsMatchingTypeNotInSnapshot(j,y){return Object.keys(this.detailsByOuterHTML).filter((z)=>!(z in y.detailsByOuterHTML)).map((z)=>this.detailsByOuterHTML[z]).filter(({type:z})=>z==j).map(({elements:[z]})=>z)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((j,y)=>{const{type:z,tracked:A,elements:J}=this.detailsByOuterHTML[y];if(z==null&&!A)return[...j,...J];else if(J.length>1)return[...j,...J.slice(1)];else return j},[])}getMetaValue(j){const y=this.findMetaElementByName(j);return y?y.getAttribute("content"):null}findMetaElementByName(j){return Object.keys(this.detailsByOuterHTML).reduce((y,z)=>{const{elements:[A]}=this.detailsByOuterHTML[z];return kz(A,j)?A:y},void 0|void 0)}}class F extends e{static fromHTMLString(j=""){return this.fromDocument(Rj(j))}static fromElement(j){return this.fromDocument(j.ownerDocument)}static fromDocument({documentElement:j,body:y,head:z}){return new this(j,y,new ej(z))}constructor(j,y,z){super(y);this.documentElement=j,this.headSnapshot=z}clone(){const j=this.element.cloneNode(!0),y=this.element.querySelectorAll("select"),z=j.querySelectorAll("select");for(let[A,J]of y.entries()){const W=z[A];for(let Y of W.selectedOptions)Y.selected=!1;for(let Y of J.selectedOptions)W.options[Y.index].selected=!0}for(let A of j.querySelectorAll('input[type="password"]'))A.value="";return new F(this.documentElement,j,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){const j=this.getSetting("root")??"/";return H(j)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(j){return this.headSnapshot.getMetaValue(`turbo-${j}`)}}class jy{#j=!1;#y=Promise.resolve();renderChange(j,y){if(j&&this.viewTransitionsAvailable&&!this.#j)this.#j=!0,this.#y=this.#y.then(async()=>{await document.startViewTransition(y).finished});else this.#y=this.#y.then(y);return this.#y}get viewTransitionsAvailable(){return document.startViewTransition}}var Pz={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},Aj={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},q={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},c={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},gz={advance:"forward",restore:"back",replace:"none"};class yy{identifier=P();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=q.initialized;viewTransitioner=new jy;constructor(j,y,z,A={}){this.delegate=j,this.location=y,this.restorationIdentifier=z||P();const{action:J,historyChanged:W,referrer:Y,snapshot:Z,snapshotHTML:V,response:M,visitCachedSnapshot:o,willRender:g,updateHistory:C,shouldCacheSnapshot:Wj,acceptsStreamResponse:Xj,direction:jj}={...Pz,...A};this.action=J,this.historyChanged=W,this.referrer=Y,this.snapshot=Z,this.snapshotHTML=V,this.response=M,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=o,this.willRender=g,this.updateHistory=C,this.scrolled=!g,this.shouldCacheSnapshot=Wj,this.acceptsStreamResponse=Xj,this.direction=jj||gz[J]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){if(this.state==q.initialized)this.recordTimingMetric(Aj.visitStart),this.state=q.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this)}cancel(){if(this.state==q.started){if(this.request)this.request.cancel();this.cancelRender(),this.state=q.canceled}}complete(){if(this.state==q.started){if(this.recordTimingMetric(Aj.visitEnd),this.adapter.visitCompleted(this),this.state=q.completed,this.followRedirect(),!this.followedRedirect)this.delegate.visitCompleted(this)}}fail(){if(this.state==q.started)this.state=q.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this)}changeHistory(){if(!this.historyChanged&&this.updateHistory){const j=this.location.href===this.referrer?.href?"replace":this.action,y=pj(j);this.history.update(y,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){if(this.hasPreloadedResponse())this.simulateRequest();else if(this.shouldIssueRequest()&&!this.request)this.request=new l(this,T.get,this.location),this.request.perform()}simulateRequest(){if(this.response)this.startRequest(),this.recordResponse(),this.finishRequest()}startRequest(){this.recordTimingMetric(Aj.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(j=this.response){if(this.response=j,j){const{statusCode:y}=j;if(gj(y))this.adapter.visitRequestCompleted(this);else this.adapter.visitRequestFailedWithStatusCode(this,y)}}finishRequest(){this.recordTimingMetric(Aj.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:j,responseHTML:y}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot)this.cacheSnapshot();if(this.view.renderPromise)await this.view.renderPromise;if(gj(j)&&y!=null){const z=F.fromHTMLString(y);await this.renderPageSnapshot(z,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(F.fromHTMLString(y),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){const j=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(j&&(!d(this.location)||j.hasAnchor(d(this.location)))){if(this.action=="restore"||j.isPreviewable)return j}}getPreloadedSnapshot(){if(this.snapshotHTML)return F.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const j=this.getCachedSnapshot();if(j){const y=this.shouldIssueRequest();this.render(async()=>{if(this.cacheSnapshot(),this.isSamePage||this.isPageRefresh)this.adapter.visitRendered(this);else{if(this.view.renderPromise)await this.view.renderPromise;if(await this.renderPageSnapshot(j,y),this.adapter.visitRendered(this),!y)this.complete()}})}}followRedirect(){if(this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected)this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0}goToSamePageAnchor(){if(this.isSamePage)this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(j){if(this.acceptsStreamResponse)j.acceptResponseType(R.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(j,y){}async requestSucceededWithResponse(j,y){const z=await y.responseHTML,{redirected:A,statusCode:J}=y;if(z==null)this.recordResponse({statusCode:c.contentTypeMismatch,redirected:A});else this.redirectedToLocation=y.redirected?y.location:void 0,this.recordResponse({statusCode:J,responseHTML:z,redirected:A})}async requestFailedWithResponse(j,y){const z=await y.responseHTML,{redirected:A,statusCode:J}=y;if(z==null)this.recordResponse({statusCode:c.contentTypeMismatch,redirected:A});else this.recordResponse({statusCode:J,responseHTML:z,redirected:A})}requestErrored(j,y){this.recordResponse({statusCode:c.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){if(!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)){if(this.action=="restore")this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop();else this.scrollToAnchor()||this.view.scrollToTop();if(this.isSamePage)this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location);this.scrolled=!0}}scrollToRestoredPosition(){const{scrollPosition:j}=this.restorationData;if(j)return this.view.scrollToPosition(j),!0}scrollToAnchor(){const j=d(this.location);if(j!=null)return this.view.scrollToAnchor(j),!0}recordTimingMetric(j){this.timingMetrics[j]=(new Date()).getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(j){switch(j){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){if(this.isSamePage)return!1;else if(this.action=="restore")return!this.hasCachedSnapshot();else return this.willRender}cacheSnapshot(){if(!this.snapshotCached)this.view.cacheSnapshot(this.snapshot).then((j)=>j&&this.visitCachedSnapshot(j)),this.snapshotCached=!0}async render(j){this.cancelRender(),this.frame=await f(),await j(),delete this.frame}async renderPageSnapshot(j,y){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(j),async()=>{await this.view.renderPage(j,y,this.willRender,this),this.performScroll()})}cancelRender(){if(this.frame)cancelAnimationFrame(this.frame),delete this.frame}}class zy{progressBar=new k;constructor(j){this.session=j}visitProposedToLocation(j,y){if(L(j,this.navigator.rootLocation))this.navigator.startVisit(j,y?.restorationIdentifier||P(),y);else window.location.href=j.toString()}visitStarted(j){this.location=j.location,j.loadCachedSnapshot(),j.issueRequest(),j.goToSamePageAnchor()}visitRequestStarted(j){if(this.progressBar.setValue(0),j.hasCachedSnapshot()||j.action!="restore")this.showVisitProgressBarAfterDelay();else this.showProgressBar()}visitRequestCompleted(j){j.loadResponse()}visitRequestFailedWithStatusCode(j,y){switch(y){case c.networkFailure:case c.timeoutFailure:case c.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:y}});default:return j.loadResponse()}}visitRequestFinished(j){}visitCompleted(j){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(j){this.reload(j)}visitFailed(j){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(j){}formSubmissionStarted(j){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(j){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){if(this.progressBar.hide(),this.visitProgressBarTimeout!=null)window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout}showFormProgressBarAfterDelay(){if(this.formProgressBarTimeout==null)this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideFormProgressBar(){if(this.progressBar.hide(),this.formProgressBarTimeout!=null)window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout}showProgressBar=()=>{this.progressBar.show()};reload(j){$("turbo:reload",{detail:j}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}}class Ay{selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){if(!this.started)this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1)}stop(){if(this.started)this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1)}removeTemporaryElements=(j)=>{for(let y of this.temporaryElements)y.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const j=document.querySelectorAll(this.deprecatedSelector);if(j.length)console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`);return[...j]}}class By{constructor(j,y){this.session=j,this.element=y,this.linkInterceptor=new Tj(this,y),this.formSubmitObserver=new Oj(this,y)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(j,y,z){return this.#y(j)}linkClickIntercepted(j,y,z){const A=this.#z(j);if(A)A.delegate.linkClickIntercepted(j,y,z)}willSubmitForm(j,y){return j.closest("turbo-frame")==null&&this.#j(j,y)&&this.#y(j,y)}formSubmitted(j,y){const z=this.#z(j,y);if(z)z.delegate.formSubmitted(j,y)}#j(j,y){const z=$j(j,y),A=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),J=H(A?.content??"/");return this.#y(j,y)&&L(z,J)}#y(j,y){if(j instanceof HTMLFormElement?this.session.submissionIsNavigatable(j,y):this.session.elementIsNavigatable(j)){const A=this.#z(j,y);return A?A!=j.closest("turbo-frame"):!1}else return!1}#z(j,y){const z=y?.getAttribute("data-turbo-frame")||j.getAttribute("data-turbo-frame");if(z&&z!="_top"){const A=this.element.querySelector(`#${z}:not([disabled])`);if(A instanceof N)return A}}}class Dy{location;restorationIdentifier=P();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(j){this.delegate=j}start(){if(!this.started)addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href))}stop(){if(this.started)removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1}push(j,y){this.update(history.pushState,j,y)}replace(j,y){this.update(history.replaceState,j,y)}update(j,y,z=P()){if(j===history.pushState)++this.currentIndex;const A={turbo:{restorationIdentifier:z,restorationIndex:this.currentIndex}};j.call(history,A,"",y.href),this.location=y,this.restorationIdentifier=z}getRestorationDataForIdentifier(j){return this.restorationData[j]||{}}updateRestorationData(j){const{restorationIdentifier:y}=this,z=this.restorationData[y];this.restorationData[y]={...z,...j}}assumeControlOfScrollRestoration(){if(!this.previousScrollRestoration)this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual"}relinquishControlOfScrollRestoration(){if(this.previousScrollRestoration)history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration}onPopState=(j)=>{if(this.shouldHandlePopState()){const{turbo:y}=j.state||{};if(y){this.location=new URL(window.location.href);const{restorationIdentifier:z,restorationIndex:A}=y;this.restorationIdentifier=z;const J=A>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,z,J),this.currentIndex=A}}};onPageLoad=async(j)=>{await sy(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}class Gy{started=!1;#j=null;constructor(j,y){this.delegate=j,this.eventTarget=y}start(){if(this.started)return;if(this.eventTarget.readyState==="loading")this.eventTarget.addEventListener("DOMContentLoaded",this.#y,{once:!0});else this.#y()}stop(){if(!this.started)return;this.eventTarget.removeEventListener("mouseenter",this.#z,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#B,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#A,!0),this.started=!1}#y=()=>{this.eventTarget.addEventListener("mouseenter",this.#z,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#B,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#A,!0),this.started=!0};#z=(j)=>{if(i("turbo-prefetch")==="false")return;const y=j.target;if(y.matches&&y.matches("a[href]:not([target^=_]):not([download])")&&this.#J(y)){const A=y,J=aj(A);if(this.delegate.canPrefetchRequestToLocation(A,J)){this.#j=A;const W=new l(this,T.get,J,new URLSearchParams,y);u.setLater(J.toString(),W,this.#G)}}};#B=(j)=>{if(j.target===this.#j)this.#D()};#D=()=>{u.clear(),this.#j=null};#A=(j)=>{if(j.target.tagName!=="FORM"&&j.detail.fetchOptions.method==="get"){const y=u.get(j.detail.url.toString());if(y)j.detail.fetchRequest=y;u.clear()}};prepareRequest(j){const y=j.target;j.headers["X-Sec-Purpose"]="prefetch";const z=y.closest("turbo-frame"),A=y.getAttribute("data-turbo-frame")||z?.getAttribute("target")||z?.id;if(A&&A!=="_top")j.headers["Turbo-Frame"]=A}requestSucceededWithResponse(){}requestStarted(j){}requestErrored(j){}requestFinished(j){}requestPreventedHandlingResponse(j,y){}requestFailedWithResponse(j,y){}get#G(){return Number(i("turbo-prefetch-cache-time"))||Qz}#J(j){if(!j.getAttribute("href"))return!1;if(wz(j))return!1;if(vz(j))return!1;if(Sz(j))return!1;if(Ez(j))return!1;if(bz(j))return!1;return!0}}var wz=(j)=>{return j.origin!==document.location.origin||!["http:","https:"].includes(j.protocol)||j.hasAttribute("target")},vz=(j)=>{return j.pathname+j.search===document.location.pathname+document.location.search||j.href.startsWith("#")},Sz=(j)=>{if(j.getAttribute("data-turbo-prefetch")==="false")return!0;if(j.getAttribute("data-turbo")==="false")return!0;const y=a(j,"[data-turbo-prefetch]");if(y&&y.getAttribute("data-turbo-prefetch")==="false")return!0;return!1},Ez=(j)=>{const y=j.getAttribute("data-turbo-method");if(y&&y.toLowerCase()!=="get")return!0;if(dz(j))return!0;if(j.hasAttribute("data-turbo-confirm"))return!0;if(j.hasAttribute("data-turbo-stream"))return!0;return!1},dz=(j)=>{return j.hasAttribute("data-remote")||j.hasAttribute("data-behavior")||j.hasAttribute("data-confirm")||j.hasAttribute("data-method")},bz=(j)=>{return $("turbo:before-prefetch",{target:j,cancelable:!0}).defaultPrevented};class Jy{constructor(j){this.delegate=j}proposeVisit(j,y={}){if(this.delegate.allowsVisitingLocationWithAction(j,y.action))this.delegate.visitProposedToLocation(j,y)}startVisit(j,y,z={}){this.stop(),this.currentVisit=new yy(this,H(j),y,{referrer:this.location,...z}),this.currentVisit.start()}submitForm(j,y){this.stop(),this.formSubmission=new t(this,j,y,!0),this.formSubmission.start()}stop(){if(this.formSubmission)this.formSubmission.stop(),delete this.formSubmission;if(this.currentVisit)this.currentVisit.cancel(),delete this.currentVisit}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(j){if(typeof this.adapter.formSubmissionStarted==="function")this.adapter.formSubmissionStarted(j)}async formSubmissionSucceededWithResponse(j,y){if(j==this.formSubmission){const z=await y.responseHTML;if(z){const A=j.isSafe;if(!A)this.view.clearSnapshotCache();const{statusCode:J,redirected:W}=y,Z={action:this.#j(j,y),shouldCacheSnapshot:A,response:{statusCode:J,responseHTML:z,redirected:W}};this.proposeVisit(y.location,Z)}}}async formSubmissionFailedWithResponse(j,y){const z=await y.responseHTML;if(z){const A=F.fromHTMLString(z);if(y.serverError)await this.view.renderError(A,this.currentVisit);else await this.view.renderPage(A,!1,!0,this.currentVisit);if(!A.shouldPreserveScrollPosition)this.view.scrollToTop();this.view.clearSnapshotCache()}}formSubmissionErrored(j,y){console.error(y)}formSubmissionFinished(j){if(typeof this.adapter.formSubmissionFinished==="function")this.adapter.formSubmissionFinished(j)}visitStarted(j){this.delegate.visitStarted(j)}visitCompleted(j){this.delegate.visitCompleted(j)}locationWithActionIsSamePage(j,y){const z=d(j),A=d(this.view.lastRenderedLocation),J=y==="restore"&&typeof z==="undefined";return y!=="replace"&&Zj(j)===Zj(this.view.lastRenderedLocation)&&(J||z!=null&&z!==A)}visitScrolledToSamePageLocation(j,y){this.delegate.visitScrolledToSamePageLocation(j,y)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#j(j,y){const{submitter:z,formElement:A}=j;return b(z,A)||this.#y(y)}#y(j){return j.redirected&&j.location.href===this.location?.href?"replace":"advance"}}var S={initial:0,loading:1,interactive:2,complete:3};class Ky{stage=S.initial;started=!1;constructor(j){this.delegate=j}start(){if(!this.started){if(this.stage==S.initial)this.stage=S.loading;document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0}}stop(){if(this.started)document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1}interpretReadyState=()=>{const{readyState:j}=this;if(j=="interactive")this.pageIsInteractive();else if(j=="complete")this.pageIsComplete()};pageIsInteractive(){if(this.stage==S.loading)this.stage=S.interactive,this.delegate.pageBecameInteractive()}pageIsComplete(){if(this.pageIsInteractive(),this.stage==S.interactive)this.stage=S.complete,this.delegate.pageLoaded()}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}}class Oy{started=!1;constructor(j){this.delegate=j}start(){if(!this.started)addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0}stop(){if(this.started)removeEventListener("scroll",this.onScroll,!1),this.started=!1}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(j){this.delegate.scrollPositionChanged(j)}}class Qy{render({fragment:j}){Nj.preservingPermanentElements(this,Rz(j),()=>{hz(j,()=>{pz(()=>{document.documentElement.appendChild(j)})})})}enteringBardo(j,y){y.replaceWith(j.cloneNode(!0))}leavingBardo(){}}class Wy{sources=new Set;#j=!1;constructor(j){this.delegate=j}start(){if(!this.#j)this.#j=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1)}stop(){if(this.#j)this.#j=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1)}connectStreamSource(j){if(!this.streamSourceIsConnected(j))this.sources.add(j),j.addEventListener("message",this.receiveMessageEvent,!1)}disconnectStreamSource(j){if(this.streamSourceIsConnected(j))this.sources.delete(j),j.removeEventListener("message",this.receiveMessageEvent,!1)}streamSourceIsConnected(j){return this.sources.has(j)}inspectFetchResponse=(j)=>{const y=fz(j);if(y&&az(y))j.preventDefault(),this.receiveMessageResponse(y)};receiveMessageEvent=(j)=>{if(this.#j&&typeof j.data=="string")this.receiveMessageHTML(j.data)};async receiveMessageResponse(j){const y=await j.responseHTML;if(y)this.receiveMessageHTML(y)}receiveMessageHTML(j){this.delegate.receivedMessageFromStream(R.wrap(j))}}class _j extends Qj{static renderElement(j,y){const{documentElement:z,body:A}=document;z.replaceChild(y,A)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:j,head:y}=document;j.replaceChild(this.newHead,y),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let j of this.scriptElements){const y=j.parentNode;if(y){const z=m(j);y.replaceChild(z,j)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}var cz=function(){let j=new Set,y={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:C,afterNodeAdded:C,beforeNodeMorphed:C,afterNodeMorphed:C,beforeNodeRemoved:C,afterNodeRemoved:C,beforeAttributeUpdated:C},head:{style:"merge",shouldPreserve:function(B){return B.getAttribute("im-preserve")==="true"},shouldReAppend:function(B){return B.getAttribute("im-re-append")==="true"},shouldRemove:C,afterHeadMorphed:C}};function z(B,D,G={}){if(B instanceof Document)B=B.documentElement;if(typeof D==="string")D=Vy(D);let K=ky(D),O=Xj(B,K,G);return A(B,K,O)}function A(B,D,G){if(G.head.block){let K=B.querySelector("head"),O=D.querySelector("head");if(K&&O){let Q=g(O,K,G);Promise.all(Q).then(function(){A(B,D,Object.assign(G,{head:{block:!1,ignore:!0}}))});return}}if(G.morphStyle==="innerHTML")return Y(D,B,G),B.children;else if(G.morphStyle==="outerHTML"||G.morphStyle==null){let K=Py(D,B,G),O=K?.previousSibling,Q=K?.nextSibling,X=W(B,K,G);if(K)return Ly(O,X,Q);else return[]}else throw"Do not understand how to morph style "+G.morphStyle}function J(B,D){return D.ignoreActiveValue&&B===document.activeElement&&B!==document.body}function W(B,D,G){if(G.ignoreActive&&B===document.activeElement);else if(D==null){if(G.callbacks.beforeNodeRemoved(B)===!1)return B;return B.remove(),G.callbacks.afterNodeRemoved(B),null}else if(!yj(B,D)){if(G.callbacks.beforeNodeRemoved(B)===!1)return B;if(G.callbacks.beforeNodeAdded(D)===!1)return B;return B.parentElement.replaceChild(D,B),G.callbacks.afterNodeAdded(D),G.callbacks.afterNodeRemoved(B),D}else{if(G.callbacks.beforeNodeMorphed(B,D)===!1)return B;if(B instanceof HTMLHeadElement&&G.head.ignore);else if(B instanceof HTMLHeadElement&&G.head.style!=="morph")g(D,B,G);else if(V(D,B,G),!J(B,G))Y(D,B,G);return G.callbacks.afterNodeMorphed(B,D),B}}function Y(B,D,G){let K=B.firstChild,O=D.firstChild,Q;while(K){if(Q=K,K=Q.nextSibling,O==null){if(G.callbacks.beforeNodeAdded(Q)===!1)return;D.appendChild(Q),G.callbacks.afterNodeAdded(Q),w(G,Q);continue}if(jj(Q,O,G)){W(O,Q,G),O=O.nextSibling,w(G,Q);continue}let X=Uy(B,D,Q,O,G);if(X){O=qj(O,X,G),W(X,Q,G),w(G,Q);continue}let x=qy(B,D,Q,O,G);if(x){O=qj(O,x,G),W(x,Q,G),w(G,Q);continue}if(G.callbacks.beforeNodeAdded(Q)===!1)return;D.insertBefore(Q,O),G.callbacks.afterNodeAdded(Q),w(G,Q)}while(O!==null){let X=O;O=O.nextSibling,Vj(X,G)}}function Z(B,D,G,K){if(B==="value"&&K.ignoreActiveValue&&D===document.activeElement)return!0;return K.callbacks.beforeAttributeUpdated(B,D,G)===!1}function V(B,D,G){let K=B.nodeType;if(K===1){const O=B.attributes,Q=D.attributes;for(let X of O){if(Z(X.name,D,"update",G))continue;if(D.getAttribute(X.name)!==X.value)D.setAttribute(X.name,X.value)}for(let X=Q.length-1;0<=X;X--){const x=Q[X];if(Z(x.name,D,"remove",G))continue;if(!B.hasAttribute(x.name))D.removeAttribute(x.name)}}if(K===8||K===3){if(D.nodeValue!==B.nodeValue)D.nodeValue=B.nodeValue}if(!J(D,G))o(B,D,G)}function M(B,D,G,K){if(B[G]!==D[G]){let O=Z(G,D,"update",K);if(!O)D[G]=B[G];if(B[G]){if(!O)D.setAttribute(G,B[G])}else if(!Z(G,D,"remove",K))D.removeAttribute(G)}}function o(B,D,G){if(B instanceof HTMLInputElement&&D instanceof HTMLInputElement&&B.type!=="file"){let K=B.value,O=D.value;if(M(B,D,"checked",G),M(B,D,"disabled",G),!B.hasAttribute("value")){if(!Z("value",D,"remove",G))D.value="",D.removeAttribute("value")}else if(K!==O){if(!Z("value",D,"update",G))D.setAttribute("value",K),D.value=K}}else if(B instanceof HTMLOptionElement)M(B,D,"selected",G);else if(B instanceof HTMLTextAreaElement&&D instanceof HTMLTextAreaElement){let K=B.value,O=D.value;if(Z("value",D,"update",G))return;if(K!==O)D.value=K;if(D.firstChild&&D.firstChild.nodeValue!==K)D.firstChild.nodeValue=K}}function g(B,D,G){let K=[],O=[],Q=[],X=[],x=G.head.style,v=new Map;for(let I of B.children)v.set(I.outerHTML,I);for(let I of D.children){let U=v.has(I.outerHTML),s=G.head.shouldReAppend(I),Yj=G.head.shouldPreserve(I);if(U||Yj)if(s)O.push(I);else v.delete(I.outerHTML),Q.push(I);else if(x==="append"){if(s)O.push(I),X.push(I)}else if(G.head.shouldRemove(I)!==!1)O.push(I)}X.push(...v.values());let Lj=[];for(let I of X){let U=document.createRange().createContextualFragment(I.outerHTML).firstChild;if(G.callbacks.beforeNodeAdded(U)!==!1){if(U.href||U.src){let s=null,Yj=new Promise(function(Ey){s=Ey});U.addEventListener("load",function(){s()}),Lj.push(Yj)}D.appendChild(U),G.callbacks.afterNodeAdded(U),K.push(U)}}for(let I of O)if(G.callbacks.beforeNodeRemoved(I)!==!1)D.removeChild(I),G.callbacks.afterNodeRemoved(I);return G.head.afterHeadMorphed(D,{added:K,kept:Q,removed:O}),Lj}function C(){}function Wj(B){let D={};return Object.assign(D,y),Object.assign(D,B),D.callbacks={},Object.assign(D.callbacks,y.callbacks),Object.assign(D.callbacks,B.callbacks),D.head={},Object.assign(D.head,y.head),Object.assign(D.head,B.head),D}function Xj(B,D,G){return G=Wj(G),{target:B,newContent:D,config:G,morphStyle:G.morphStyle,ignoreActive:G.ignoreActive,ignoreActiveValue:G.ignoreActiveValue,idMap:Sy(B,D),deadIds:new Set,callbacks:G.callbacks,head:G.head}}function jj(B,D,G){if(B==null||D==null)return!1;if(B.nodeType===D.nodeType&&B.tagName===D.tagName)if(B.id!==""&&B.id===D.id)return!0;else return r(G,B,D)>0;return!1}function yj(B,D){if(B==null||D==null)return!1;return B.nodeType===D.nodeType&&B.tagName===D.tagName}function qj(B,D,G){while(B!==D){let K=B;B=B.nextSibling,Vj(K,G)}return w(G,D),D.nextSibling}function Uy(B,D,G,K,O){let Q=r(O,G,D),X=null;if(Q>0){let x=K,v=0;while(x!=null){if(jj(G,x,O))return x;if(v+=r(O,x,B),v>Q)return null;x=x.nextSibling}}return X}function qy(B,D,G,K,O){let Q=K,X=G.nextSibling,x=0;while(Q!=null){if(r(O,Q,B)>0)return null;if(yj(G,Q))return Q;if(yj(X,Q)){if(x++,X=X.nextSibling,x>=2)return null}Q=Q.nextSibling}return Q}function Vy(B){let D=new DOMParser,G=B.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(G.match(/<\/html>/)||G.match(/<\/head>/)||G.match(/<\/body>/)){let K=D.parseFromString(B,"text/html");if(G.match(/<\/html>/))return K.generatedByIdiomorph=!0,K;else{let O=K.firstChild;if(O)return O.generatedByIdiomorph=!0,O;else return null}}else{let O=D.parseFromString("<body><template>"+B+"</template></body>","text/html").body.querySelector("template").content;return O.generatedByIdiomorph=!0,O}}function ky(B){if(B==null)return document.createElement("div");else if(B.generatedByIdiomorph)return B;else if(B instanceof Node){const D=document.createElement("div");return D.append(B),D}else{const D=document.createElement("div");for(let G of[...B])D.append(G);return D}}function Ly(B,D,G){let K=[],O=[];while(B!=null)K.push(B),B=B.previousSibling;while(K.length>0){let Q=K.pop();O.push(Q),D.parentElement.insertBefore(Q,D)}O.push(D);while(G!=null)K.push(G),O.push(G),G=G.nextSibling;while(K.length>0)D.parentElement.insertBefore(K.pop(),D.nextSibling);return O}function Py(B,D,G){let K;K=B.firstChild;let O=K,Q=0;while(K){let X=gy(K,D,G);if(X>Q)O=K,Q=X;K=K.nextSibling}return O}function gy(B,D,G){if(yj(B,D))return 0.5+r(G,B,D);return 0}function Vj(B,D){if(w(D,B),D.callbacks.beforeNodeRemoved(B)===!1)return;B.remove(),D.callbacks.afterNodeRemoved(B)}function wy(B,D){return!B.deadIds.has(D)}function vy(B,D,G){return(B.idMap.get(G)||j).has(D)}function w(B,D){let G=B.idMap.get(D)||j;for(let K of G)B.deadIds.add(K)}function r(B,D,G){let K=B.idMap.get(D)||j,O=0;for(let Q of K)if(wy(B,Q)&&vy(B,Q,G))++O;return O}function kj(B,D){let G=B.parentElement,K=B.querySelectorAll("[id]");for(let O of K){let Q=O;while(Q!==G&&Q!=null){let X=D.get(Q);if(X==null)X=new Set,D.set(Q,X);X.add(O.id),Q=Q.parentElement}}}function Sy(B,D){let G=new Map;return kj(B,G),kj(D,G),G}return{morph:z,defaults:y}}();class n extends Qj{static renderElement(j,y){if(document.body&&y instanceof HTMLBodyElement)document.body.replaceWith(y);else document.documentElement.appendChild(y)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#j(),await this.mergeHead()}async render(){if(this.willRender)await this.replaceBody()}finishRendering(){if(super.finishRendering(),!this.isPreview)this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#j(){const{documentElement:j}=this.currentSnapshot,{lang:y}=this.newSnapshot;if(y)j.setAttribute("lang",y);else j.removeAttribute("lang")}async mergeHead(){const j=this.mergeProvisionalElements(),y=this.copyNewHeadStylesheetElements();if(this.copyNewHeadScriptElements(),await j,await y,this.willRender)this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const j=[];for(let y of this.newHeadStylesheetElements)j.push(ty(y)),document.head.appendChild(y);await Promise.all(j)}copyNewHeadScriptElements(){for(let j of this.newHeadScriptElements)document.head.appendChild(m(j))}removeUnusedDynamicStylesheetElements(){for(let j of this.unusedDynamicStylesheetElements)document.head.removeChild(j)}async mergeProvisionalElements(){const j=[...this.newHeadProvisionalElements];for(let y of this.currentHeadProvisionalElements)if(!this.isCurrentElementInElementList(y,j))document.head.removeChild(y);for(let y of j)document.head.appendChild(y)}isCurrentElementInElementList(j,y){for(let[z,A]of y.entries()){if(j.tagName=="TITLE"){if(A.tagName!="TITLE")continue;if(j.innerHTML==A.innerHTML)return y.splice(z,1),!0}if(A.isEqualNode(j))return y.splice(z,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let j of this.currentHeadProvisionalElements)document.head.removeChild(j)}copyNewHeadProvisionalElements(){for(let j of this.newHeadProvisionalElements)document.head.appendChild(j)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let j of this.newBodyScriptElements){const y=m(j);j.replaceWith(y)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter((j)=>{return j.getAttribute("data-turbo-track")==="dynamic"})}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class Xy extends n{async render(){if(this.willRender)await this.#j()}get renderMethod(){return"morph"}async#j(){this.#y(this.currentElement,this.newElement),this.#J(),$("turbo:morph",{detail:{currentElement:this.currentElement,newElement:this.newElement}})}#y(j,y,z="outerHTML"){this.isMorphingTurboFrame=this.#K(j),cz.morph(j,y,{morphStyle:z,callbacks:{beforeNodeAdded:this.#z,beforeNodeMorphed:this.#B,beforeAttributeUpdated:this.#D,beforeNodeRemoved:this.#G,afterNodeMorphed:this.#A}})}#z=(j)=>{return!(j.id&&j.hasAttribute("data-turbo-permanent")&&document.getElementById(j.id))};#B=(j,y)=>{if(j instanceof HTMLElement)if(!j.hasAttribute("data-turbo-permanent")&&(this.isMorphingTurboFrame||!this.#K(j)))return!$("turbo:before-morph-element",{cancelable:!0,target:j,detail:{newElement:y}}).defaultPrevented;else return!1};#D=(j,y,z)=>{return!$("turbo:before-morph-attribute",{cancelable:!0,target:y,detail:{attributeName:j,mutationType:z}}).defaultPrevented};#A=(j,y)=>{if(y instanceof HTMLElement)$("turbo:morph-element",{target:j,detail:{newElement:y}})};#G=(j)=>{return this.#B(j)};#J(){this.#X().forEach((j)=>{if(this.#K(j))this.#Q(j),j.reload()})}#Q(j){j.addEventListener("turbo:before-frame-render",(y)=>{y.detail.render=this.#W},{once:!0})}#W=(j,y)=>{$("turbo:before-frame-morph",{target:j,detail:{currentElement:j,newElement:y}}),this.#y(j,y.children,"innerHTML")};#K(j){return j.src&&j.refresh==="morph"}#X(){return Array.from(document.querySelectorAll("turbo-frame[src]")).filter((j)=>{return!j.closest("[data-turbo-permanent]")})}}class Yy{keys=[];snapshots={};constructor(j){this.size=j}has(j){return zj(j)in this.snapshots}get(j){if(this.has(j)){const y=this.read(j);return this.touch(j),y}}put(j,y){return this.write(j,y),this.touch(j),y}clear(){this.snapshots={}}read(j){return this.snapshots[zj(j)]}write(j,y){this.snapshots[zj(j)]=y}touch(j){const y=zj(j),z=this.keys.indexOf(y);if(z>-1)this.keys.splice(z,1);this.keys.unshift(y),this.trim()}trim(){for(let j of this.keys.splice(this.size))delete this.snapshots[j]}}class Zy extends Mj{snapshotCache=new Yy(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(j){return this.snapshot.prefersViewTransitions&&j.prefersViewTransitions}renderPage(j,y=!1,z=!0,A){const Y=new(this.isPageRefresh(A)&&this.snapshot.shouldMorphPage?Xy:n)(this.snapshot,j,n.renderElement,y,z);if(!Y.shouldRender)this.forceReloaded=!0;else A?.changeHistory();return this.render(Y)}renderError(j,y){y?.changeHistory();const z=new _j(this.snapshot,j,_j.renderElement,!1);return this.render(z)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(j=this.snapshot){if(j.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:y}=this;await bj();const z=j.clone();return this.snapshotCache.put(y,z),z}}getCachedSnapshotForLocation(j){return this.snapshotCache.get(j)}isPageRefresh(j){return!j||this.lastRenderedLocation.pathname===j.location.pathname&&j.action==="replace"}shouldPreserveScrollPosition(j){return this.isPageRefresh(j)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return F.fromElement(this.element)}}class _y{selector="a[data-turbo-preload]";constructor(j,y){this.delegate=j,this.snapshotCache=y}start(){if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",this.#j);else this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#j)}preloadOnLoadLinksForView(j){for(let y of j.querySelectorAll(this.selector))if(this.delegate.shouldPreloadLink(y))this.preloadURL(y)}async preloadURL(j){const y=new URL(j.href);if(this.snapshotCache.has(y))return;await new l(this,T.get,y,new URLSearchParams,j).perform()}prepareRequest(j){j.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(j,y){try{const z=await y.responseHTML,A=F.fromHTMLString(z);this.snapshotCache.put(j.url,A)}catch(z){}}requestStarted(j){}requestErrored(j){}requestFinished(j){}requestPreventedHandlingResponse(j,y){}requestFailedWithResponse(j,y){}#j=()=>{this.preloadOnLoadLinksForView(document.body)}}class $y{constructor(j){this.session=j}clear(){this.session.clearCache()}resetCacheControl(){this.#j("")}exemptPageFromCache(){this.#j("no-cache")}exemptPageFromPreview(){this.#j("no-preview")}#j(j){jz("turbo-cache-control",j)}}class xy{navigator=new Jy(this);history=new Dy(this);view=new Zy(this,document.documentElement);adapter=new zy(this);pageObserver=new Ky(this);cacheObserver=new Ay;linkPrefetchObserver=new Gy(this,document);linkClickObserver=new Cj(this,window);formSubmitObserver=new Oj(this,document);scrollObserver=new Oy(this);streamObserver=new Wy(this);formLinkClickObserver=new Fj(this,document.documentElement);frameRedirector=new By(this,document.documentElement);streamMessageRenderer=new Qy;cache=new $y(this);drive=!0;enabled=!0;progressBarDelay=500;started=!1;formMode="on";#j=150;constructor(j){this.recentRequests=j,this.preloader=new _y(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){if(!this.started)this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0}disable(){this.enabled=!1}stop(){if(this.started)this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1}registerAdapter(j){this.adapter=j}visit(j,y={}){const z=y.frame?document.getElementById(y.frame):null;if(z instanceof N){const A=y.action||b(z);z.delegate.proposeVisitIfNavigatedWithAction(z,A),z.src=j.toString()}else this.navigator.proposeVisit(H(j),y)}refresh(j,y){if(!(y&&this.recentRequests.has(y)))this.visit(j,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(j){this.streamObserver.connectStreamSource(j)}disconnectStreamSource(j){this.streamObserver.disconnectStreamSource(j)}renderStreamMessage(j){this.streamMessageRenderer.render(R.wrap(j))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(j){this.progressBarDelay=j}setFormMode(j){this.formMode=j}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#j}set pageRefreshDebouncePeriod(j){this.refresh=Bz(this.debouncedRefresh.bind(this),j),this.#j=j}shouldPreloadLink(j){const y=j.hasAttribute("data-turbo-method"),z=j.hasAttribute("data-turbo-stream"),A=j.getAttribute("data-turbo-frame"),J=A=="_top"?null:document.getElementById(A)||a(j,"turbo-frame:not([disabled])");if(y||z||J instanceof N)return!1;else{const W=new URL(j.href);return this.elementIsNavigatable(j)&&L(W,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(j,y,z){if(this.enabled)this.navigator.startVisit(j,y,{action:"restore",historyChanged:!0,direction:z});else this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(j){this.history.updateRestorationData({scrollPosition:j})}willSubmitFormLinkToLocation(j,y){return this.elementIsNavigatable(j)&&L(y,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(j,y){return this.elementIsNavigatable(j)&&L(y,this.snapshot.rootLocation)}willFollowLinkToLocation(j,y,z){return this.elementIsNavigatable(j)&&L(y,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(j,y,z)}followedLinkToLocation(j,y){const z=this.getActionForLink(j),A=j.hasAttribute("data-turbo-stream");this.visit(y.href,{action:z,acceptsStreamResponse:A})}allowsVisitingLocationWithAction(j,y){return this.locationWithActionIsSamePage(j,y)||this.applicationAllowsVisitingLocation(j)}visitProposedToLocation(j,y){wj(j),this.adapter.visitProposedToLocation(j,y)}visitStarted(j){if(!j.acceptsStreamResponse)Dj(document.documentElement),this.view.markVisitDirection(j.direction);if(wj(j.location),!j.silent)this.notifyApplicationAfterVisitingLocation(j.location,j.action)}visitCompleted(j){this.view.unmarkVisitDirection(),Gj(document.documentElement),this.notifyApplicationAfterPageLoad(j.getTimingMetrics())}locationWithActionIsSamePage(j,y){return this.navigator.locationWithActionIsSamePage(j,y)}visitScrolledToSamePageLocation(j,y){this.notifyApplicationAfterVisitingSamePageLocation(j,y)}willSubmitForm(j,y){const z=$j(j,y);return this.submissionIsNavigatable(j,y)&&L(H(z),this.snapshot.rootLocation)}formSubmitted(j,y){this.navigator.submitForm(j,y)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(j){this.renderStreamMessage(j)}viewWillCacheSnapshot(){if(!this.navigator.currentVisit?.silent)this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:j},y){const z=this.notifyApplicationBeforeRender(j,y),{defaultPrevented:A,detail:{render:J}}=z;if(this.view.renderer&&J)this.view.renderer.renderElement=J;return!A}viewRenderedSnapshot(j,y,z){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(z)}preloadOnLoadLinksForView(j){this.preloader.preloadOnLoadLinksForView(j)}viewInvalidated(j){this.adapter.pageInvalidated(j)}frameLoaded(j){this.notifyApplicationAfterFrameLoad(j)}frameRendered(j,y){this.notifyApplicationAfterFrameRender(j,y)}applicationAllowsFollowingLinkToLocation(j,y,z){return!this.notifyApplicationAfterClickingLinkToLocation(j,y,z).defaultPrevented}applicationAllowsVisitingLocation(j){return!this.notifyApplicationBeforeVisitingLocation(j).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(j,y,z){return $("turbo:click",{target:j,detail:{url:y.href,originalEvent:z},cancelable:!0})}notifyApplicationBeforeVisitingLocation(j){return $("turbo:before-visit",{detail:{url:j.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(j,y){return $("turbo:visit",{detail:{url:j.href,action:y}})}notifyApplicationBeforeCachingSnapshot(){return $("turbo:before-cache")}notifyApplicationBeforeRender(j,y){return $("turbo:before-render",{detail:{newBody:j,...y},cancelable:!0})}notifyApplicationAfterRender(j){return $("turbo:render",{detail:{renderMethod:j}})}notifyApplicationAfterPageLoad(j={}){return $("turbo:load",{detail:{url:this.location.href,timing:j}})}notifyApplicationAfterVisitingSamePageLocation(j,y){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:j.toString(),newURL:y.toString()}))}notifyApplicationAfterFrameLoad(j){return $("turbo:frame-load",{target:j})}notifyApplicationAfterFrameRender(j,y){return $("turbo:frame-render",{detail:{fetchResponse:j},target:y,cancelable:!0})}submissionIsNavigatable(j,y){if(this.formMode=="off")return!1;else{const z=y?this.elementIsNavigatable(y):!0;if(this.formMode=="optin")return z&&j.closest('[data-turbo="true"]')!=null;else return z&&this.elementIsNavigatable(j)}}elementIsNavigatable(j){const y=a(j,"[data-turbo]"),z=a(j,"turbo-frame");if(this.drive||z)if(y)return y.getAttribute("data-turbo")!="false";else return!0;else if(y)return y.getAttribute("data-turbo")=="true";else return!1}getActionForLink(j){return b(j)||"advance"}get snapshot(){return this.view.snapshot}}var iz={absoluteURL:{get(){return this.toString()}}},_=new xy(ij),{cache:lz,navigator:oz}=_,yA=Object.freeze({__proto__:null,navigator:oz,session:_,cache:lz,PageRenderer:n,PageSnapshot:F,FrameRenderer:Jj,fetch:lj,start:Iy,registerAdapter:rz,visit:sz,connectStreamSource:Hy,disconnectStreamSource:My,renderStreamMessage:mz,clearCache:nz,setProgressBarDelay:tz,setConfirmMethod:ez,setFormMode:jA});class Ty extends Error{}class Cy{fetchResponseLoaded=(j)=>Promise.resolve();#j=null;#y=()=>{};#z=!1;#B=!1;#D=new Set;action=null;constructor(j){this.element=j,this.view=new tj(this,this.element),this.appearanceObserver=new rj(this,this.element),this.formLinkClickObserver=new Fj(this,this.element),this.linkInterceptor=new Tj(this,this.element),this.restorationIdentifier=P(),this.formSubmitObserver=new Oj(this,this.element)}connect(){if(!this.#z){if(this.#z=!0,this.loadingStyle==p.lazy)this.appearanceObserver.start();else this.#A();this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start()}}disconnect(){if(this.#z)this.#z=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop()}disabledChanged(){if(this.loadingStyle==p.eager)this.#A()}sourceURLChanged(){if(this.#x("src"))return;if(this.element.isConnected)this.complete=!1;if(this.loadingStyle==p.eager||this.#B)this.#A()}sourceURLReloaded(){const{src:j}=this.element;return this.element.removeAttribute("complete"),this.element.src=null,this.element.src=j,this.element.loaded}loadingStyleChanged(){if(this.loadingStyle==p.lazy)this.appearanceObserver.start();else this.appearanceObserver.stop(),this.#A()}async#A(){if(this.enabled&&this.isActive&&!this.complete&&this.sourceURL)this.element.loaded=this.#J(H(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#B=!0}async loadResponse(j){if(j.redirected||j.succeeded&&j.isHTML)this.sourceURL=j.response.url;try{const y=await j.responseHTML;if(y){const z=Rj(y);if(F.fromDocument(z).isVisitable)await this.#G(j,z);else await this.#W(j)}}finally{this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(j){this.proposeVisitIfNavigatedWithAction(j,b(j)),this.#A()}willSubmitFormLinkToLocation(j){return this.#Y(j)}submittedFormLinkToLocation(j,y,z){const A=this.#O(j);if(A)z.setAttribute("data-turbo-frame",A.id)}shouldInterceptLinkClick(j,y,z){return this.#Y(j)}linkClickIntercepted(j,y){this.#Q(j,y)}willSubmitForm(j,y){return j.closest("turbo-frame")==this.element&&this.#Y(j,y)}formSubmitted(j,y){if(this.formSubmission)this.formSubmission.stop();this.formSubmission=new t(this,j,y);const{fetchRequest:z}=this.formSubmission;this.prepareRequest(z),this.formSubmission.start()}prepareRequest(j){if(j.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream"))j.acceptResponseType(R.contentType)}requestStarted(j){Dj(this.element)}requestPreventedHandlingResponse(j,y){this.#y()}async requestSucceededWithResponse(j,y){await this.loadResponse(y),this.#y()}async requestFailedWithResponse(j,y){await this.loadResponse(y),this.#y()}requestErrored(j,y){console.error(y),this.#y()}requestFinished(j){Gj(this.element)}formSubmissionStarted({formElement:j}){Dj(j,this.#O(j))}formSubmissionSucceededWithResponse(j,y){const z=this.#O(j.formElement,j.submitter);if(z.delegate.proposeVisitIfNavigatedWithAction(z,b(j.submitter,j.formElement,z)),z.delegate.loadResponse(y),!j.isSafe)_.clearCache()}formSubmissionFailedWithResponse(j,y){this.element.delegate.loadResponse(y),_.clearCache()}formSubmissionErrored(j,y){console.error(y)}formSubmissionFinished({formElement:j}){Gj(j,this.#O(j))}allowsImmediateRender({element:j},y){const z=$("turbo:before-frame-render",{target:this.element,detail:{newFrame:j,...y},cancelable:!0}),{defaultPrevented:A,detail:{render:J}}=z;if(this.view.renderer&&J)this.view.renderer.renderElement=J;return!A}viewRenderedSnapshot(j,y,z){}preloadOnLoadLinksForView(j){_.preloadOnLoadLinksForView(j)}viewInvalidated(){}willRenderFrame(j,y){this.previousFrameElement=j.cloneNode(!0)}visitCachedSnapshot=({element:j})=>{const y=j.querySelector("#"+this.element.id);if(y&&this.previousFrameElement)y.replaceChildren(...this.previousFrameElement.children);delete this.previousFrameElement};async#G(j,y){const z=await this.extractForeignFrameElement(y.body);if(z){const A=new e(z),J=new Jj(this,this.view.snapshot,A,Jj.renderElement,!1,!1);if(this.view.renderPromise)await this.view.renderPromise;this.changeHistory(),await this.view.render(J),this.complete=!0,_.frameRendered(j,this.element),_.frameLoaded(this.element),await this.fetchResponseLoaded(j)}else if(this.#K(j))this.#X(j)}async#J(j){const y=new l(this,T.get,j,new URLSearchParams,this.element);return this.#j?.cancel(),this.#j=y,new Promise((z)=>{this.#y=()=>{this.#y=()=>{},this.#j=null,z()},y.perform()})}#Q(j,y,z){const A=this.#O(j,z);A.delegate.proposeVisitIfNavigatedWithAction(A,b(z,j,A)),this.#H(j,()=>{A.src=y})}proposeVisitIfNavigatedWithAction(j,y=null){if(this.action=y,this.action){const z=F.fromElement(j).clone(),{visitCachedSnapshot:A}=j.delegate;j.delegate.fetchResponseLoaded=async(J)=>{if(j.src){const{statusCode:W,redirected:Y}=J,Z=await J.responseHTML,M={response:{statusCode:W,redirected:Y,responseHTML:Z},visitCachedSnapshot:A,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:z};if(this.action)M.action=this.action;_.visit(j.src,M)}}}}changeHistory(){if(this.action){const j=pj(this.action);_.history.update(j,H(this.element.src||""),this.restorationIdentifier)}}async#W(j){console.warn(`The response (${j.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#Z(j.response)}#K(j){this.element.setAttribute("complete","");const y=j.response,z=async(J,W)=>{if(J instanceof Response)this.#Z(J);else _.visit(J,W)};return!$("turbo:frame-missing",{target:this.element,detail:{response:y,visit:z},cancelable:!0}).defaultPrevented}#X(j){this.view.missing(),this.#_(j)}#_(j){const y=`The response (${j.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new Ty(y)}async#Z(j){const y=new Kj(j),z=await y.responseHTML,{location:A,redirected:J,statusCode:W}=y;return _.visit(A,{response:{redirected:J,statusCode:W,responseHTML:z}})}#O(j,y){const z=Bj("data-turbo-frame",y,j)||this.element.getAttribute("target");return vj(z)??this.element}async extractForeignFrameElement(j){let y;const z=CSS.escape(this.id);try{if(y=Sj(j.querySelector(`turbo-frame#${z}`),this.sourceURL),y)return y;if(y=Sj(j.querySelector(`turbo-frame[src][recurse~=${z}]`),this.sourceURL),y)return await y.loaded,await this.extractForeignFrameElement(y)}catch(A){return console.error(A),new N}return null}#$(j,y){const z=$j(j,y);return L(H(z),this.rootLocation)}#Y(j,y){const z=Bj("data-turbo-frame",y,j)||this.element.getAttribute("target");if(j instanceof HTMLFormElement&&!this.#$(j,y))return!1;if(!this.enabled||z=="_top")return!1;if(z){const A=vj(z);if(A)return!A.disabled}if(!_.elementIsNavigatable(j))return!1;if(y&&!_.elementIsNavigatable(y))return!1;return!0}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(j){this.#I("src",()=>{this.element.src=j??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#y()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(j){if(j)this.element.setAttribute("complete","");else this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#z}get rootLocation(){const y=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return H(y)}#x(j){return this.#D.has(j)}#I(j,y){this.#D.add(j),y(),this.#D.delete(j)}#H(j,y){this.currentNavigationElement=j,y(),delete this.currentNavigationElement}}var Fy={after(){this.targetElements.forEach((j)=>j.parentElement?.insertBefore(this.templateContent,j.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((j)=>j.append(this.templateContent))},before(){this.targetElements.forEach((j)=>j.parentElement?.insertBefore(this.templateContent,j))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((j)=>j.prepend(this.templateContent))},remove(){this.targetElements.forEach((j)=>j.remove())},replace(){this.targetElements.forEach((j)=>j.replaceWith(this.templateContent))},update(){this.targetElements.forEach((j)=>{j.innerHTML="",j.append(this.templateContent)})},refresh(){_.refresh(this.baseURI,this.requestId)}};class Uj extends HTMLElement{static async renderElement(j){await j.performAction()}async connectedCallback(){try{await this.render()}catch(j){console.error(j)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{const j=this.beforeRenderEvent;if(this.dispatchEvent(j))await f(),await j.detail.render(this)})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach((j)=>j.remove())}get duplicateChildren(){const j=this.targetElements.flatMap((z)=>[...z.children]).filter((z)=>!!z.id),y=[...this.templateContent?.children||[]].filter((z)=>!!z.id).map((z)=>z.id);return j.filter((z)=>y.includes(z.id))}get performAction(){if(this.action){const j=Fy[this.action];if(j)return j;this.#j("unknown action")}this.#j("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;else if(this.targets)return this.targetElementsByQuery;else this.#j("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const j=this.ownerDocument.createElement("template");return this.appendChild(j),j}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#j("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#j(j){throw new Error(`${this.description}: ${j}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:Uj.renderElement}})}get targetElementsById(){const j=this.ownerDocument?.getElementById(this.target);if(j!==null)return[j];else return[]}get targetElementsByQuery(){const j=this.ownerDocument?.querySelectorAll(this.targets);if(j.length!==0)return Array.prototype.slice.call(j);else return[]}}class Ny extends HTMLElement{streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Hy(this.streamSource)}disconnectedCallback(){if(this.streamSource)this.streamSource.close(),My(this.streamSource)}get src(){return this.getAttribute("src")||""}}N.delegateConstructor=Cy;if(customElements.get("turbo-frame")===void 0)customElements.define("turbo-frame",N);if(customElements.get("turbo-stream")===void 0)customElements.define("turbo-stream",Uj);if(customElements.get("turbo-stream-source")===void 0)customElements.define("turbo-stream-source",Ny);(()=>{let j=document.currentScript;if(!j)return;if(j.hasAttribute("data-turbo-suppress-warning"))return;j=j.parentElement;while(j){if(j==document.body)return console.warn(hj`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applicationâs JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ââ
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,j.outerHTML);j=j.parentElement}})();window.Turbo={...yA,StreamActions:Fy};Iy();export{sz as visit,Iy as start,tz as setProgressBarDelay,jA as setFormMode,ez as setConfirmMethod,_ as session,mz as renderStreamMessage,rz as registerAdapter,oz as navigator,Hj as isSafe,Ij as fetchMethodFromString,Gz as fetchEnctypeFromString,lj as fetch,My as disconnectStreamSource,Hy as connectStreamSource,nz as clearCache,lz as cache,Ny as StreamSourceElement,Uj as StreamElement,Fy as StreamActions,F as PageSnapshot,n as PageRenderer,Jj as FrameRenderer,p as FrameLoadingStyle,N as FrameElement,Kj as FetchResponse,l as FetchRequest,T as FetchMethod,E as FetchEnctype};

//# debugId=A236BADE45C1F41764756e2164756e21
